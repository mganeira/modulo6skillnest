{% extends 'base.html' %}

{% block title %}{{ titulo_pagina }}{% endblock %}

{% block content %}
<h2>{{ titulo_pagina }}</h2>


<h3>Mis eventos - Edición Avanzada</h3>

{% if eventos %}
    {% for evento in eventos %}
    <div class="card">
        <h3>{{ evento.titulo }}</h3>
        <p>{{ evento.contenido }}</p>
        <a href="/admin/evento/{{ evento.pk }}/change/" class="btn">Editar</a>
    </div>
    {% endfor %}
{% else %}
    <p>No tienes eventos aún.</p>
{% endif %}

<div class="info-box" style="margin-top: 20px;">
    <strong>Conceptos clave:</strong>
    <ul>
        <li>Orden de mixins: LoginRequiredMixin → PermissionRequiredMixin → Clase base</li>
        <li>Python evalúa herencia de izquierda a derecha</li>
        <li>Primero verifica autenticación, luego permisos</li>
        <li>Puedes combinar múltiples mixins según necesites</li>
    </ul>
</div>

<div class="info-box" style="margin-top: 20px;">
    <strong>Permiso personalizado en models.py:</strong>
    <div class="code-block">
class Meta:
    permissions = [
        ('can_edit_all_eventos', 'Puede editar todos los eventos'),
    ]
    </div>
</div>

<div style="margin-top: 20px;">
    <a href="{% url 'lista_eventos' %}" class="btn">Volver al inicio</a>
</div>
{% endblock %}